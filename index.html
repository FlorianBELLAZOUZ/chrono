<!DOCTYPE html>
<html>
<head>
  <title>chrono</title>
  <style type="text/css">
    html{
      background-color: #1695A3;
      font-family: sans-serif;
      text-align: center;
      color: #F3FFE2;
    }
    .contener{
      position: absolute;
      margin: auto;
      height: 400px;
      width: 50%;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
    }
    h1{
      font-size: 14px;
      font-weight: 100;
    }
    .chrono{
      font-weight: 800;
      font-size: 100px;
    }
  </style>
</head>
<body>
<div class="contener">
  <h1>stop the timer at 3000 ms</h1>
  <p class="chrono">0</p>
  <p>ton score est de :</p>
  <p class="score"></p>
</div>
</body>
<script type="text/javascript">
  var chrono = document.querySelector('.chrono');
  chrono.time = 0;
  chrono.state = 'waiting';
  chrono.updateTime = function(interval) {
    chrono.time += interval;
  }
  chrono.draw = function() {
    this.innerHTML =  this.time;
  }
  chrono.reInit = function() {
    chrono.innerHTML = chrono.time = 0;
  }

  var score = document.querySelector('.score');

  function click() {
    if(chrono.state == 'waiting'){
      chrono.state = 'running';
    }else
    if(chrono.state == 'running'){
      chrono.state = 'waiting';
      checkScore();
      chrono.reInit();
    }
  }

  var lastTime = Date.now();
  function update() {
    var intervalTime = Date.now() - lastTime;
    lastTime = Date.now();
    if(chrono.state == 'running') chrono.updateTime(intervalTime)
    chrono.draw();
  }

  function checkScore() {
    var time = Math.abs(chrono.time - 3000);
    score.innerHTML = time;
  }

  window.addEventListener('click', click);
  setInterval(update, 10);
</script>
</html>
